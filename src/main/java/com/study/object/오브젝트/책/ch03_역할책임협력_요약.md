# Chapter 03. 역할, 책임, 협력

> 객체지향 설계의 핵심 삼총사

---

## 1. 협력 (Collaboration)

### 정의
객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 **상호작용**

### 핵심 포인트
| 개념 | 설명 |
|------|------|
| 유일한 방법 | 협력은 객체지향에서 기능을 구현하는 **유일한 방법** |
| 커뮤니케이션 | 메시지 전송은 객체 간 협력의 **유일한 수단** |
| 자율성 | 내부 구현의 캡슐화 → 변경 파급효과 제한 |

### 협력이 설계의 문맥을 결정한다

```
협력 → 행동 결정 → 상태 결정
```

- **협력**이 객체의 행동을 결정한다
- **행동**이 객체의 상태를 결정한다
- 결론: 협력이 객체의 행동과 상태 모두를 결정한다

---

## 2. 책임 (Responsibility)

### 정의
협력에 참여하기 위해 객체가 수행하는 **행동**

### 책임의 두 가지 종류

```
┌─────────────────────────────────────────────┐
│                    책임                      │
├─────────────────────┬───────────────────────┤
│      하는 것        │        아는 것         │
│     (Doing)        │      (Knowing)        │
├─────────────────────┼───────────────────────┤
│ • 스스로 하는 것     │ • 사적인 정보          │
│   (생성, 계산)      │                       │
│ • 다른 객체의 행동   │ • 관련된 객체          │
│   시작시키기        │                       │
│ • 다른 객체의 활동   │ • 유도/계산 가능한 것   │
│   제어/조절         │                       │
└─────────────────────┴───────────────────────┘
```

### 책임 할당의 핵심 원칙

#### 정보 전문가 패턴 (Information Expert)
> 책임을 수행하는 데 필요한 **정보를 가장 잘 아는 전문가**에게 책임을 할당하라

#### 설계 프로세스
1. 시스템 기능을 **하나의 책임**으로 바라본다
2. 더 작은 책임으로 **분해**한다
3. 적절한 객체에게 **할당**한다
4. 반복한다

### 책임 주도 설계 (RDD: Responsibility-Driven Design)
> 책임을 찾고 → 적절한 객체를 찾아 → 책임을 할당하는 방식

**핵심**: 상태가 아닌 **행동**이 중요하다!

---

## 3. 역할 (Role)

### 정의
객체가 특정 협력 안에서 수행하는 **책임의 집합**

### 역할이 중요한 이유

```
역할 = 다른 것으로 교체 가능한 책임의 집합
     = 유연하고 재사용 가능한 협력의 열쇠
```

### 역할의 장점

| 장점 | 설명 |
|------|------|
| 추상화 | 세부사항 생략, 핵심 개념 강조 |
| 유연성 | 동일 책임 = 동일 역할 → 서로 대체 가능 |
| 재사용 | 불필요한 중복 코드 제거 |

### 역할의 구현 방법

```java
// 추상 클래스: 책임의 일부를 구현
abstract class DiscountPolicy { ... }

// 인터페이스: 책임의 집합만 나열
interface DiscountCondition { ... }
```

### 객체 vs 역할 판단 기준

```
책임을 수행하는 대상이...
├── 한 종류? → 객체로 시작
└── 여러 종류? → 역할로 시작
```

**실전 팁**: 애매하면 **객체로 시작**하고, 나중에 **역할을 분리**하라

---

## 핵심 요약

### 설계의 흐름

```
협력 → 역할 → 객체 → 클래스
```

### 기억해야 할 것

1. **협력**이 모든 것의 문맥이다
2. **책임**은 객체지향 설계의 핵심이다
3. **역할**은 유연한 설계의 열쇠다
4. 중요한 것은 **상태가 아닌 행동**이다
5. **캡슐화**로 자율적인 객체를 만든다

### 한 문장 정리

> "적절한 협력이 적절한 책임을 제공하고, 적절한 책임을 적절한 객체에게 할당해야만 단순하고 유연한 설계를 창조할 수 있다."